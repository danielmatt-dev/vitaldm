"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[70],{3070:(k,j,a)=>{a.r(j),a.d(j,{PerfilModule:()=>i});var m=a(177),v=a(3607),g=a(467),C=a(6914),l=a(7087),P=a(5621),D=a(1510),e=a(4438),x=a(7693),f=a(5779),E=a(7608),b=a(2242),s=a(4341),M=a(1141),h=a(9883),T=a(9851),A=a(7722);const I=()=>({width:"100%"});let y=(()=>{class r{constructor(o,c,t,p){this.layoutService=o,this.primengConfig=c,this.messageService=t,this.remoteDoctor=p,this.enable=!0,this.labelFirstButton="Cambiar contrase\xf1a",this.severity="info",this.labelSecondButton="Editar informaci\xf3n",this.message="",this.generos=["Hombre","Mujer"],this.clave="",this.nombre="",this.apellidoPaterno="",this.apellidoMaterno="",this.fechaNacimiento=new Date,this.maxDate=new Date,this.telefono="",this.correo="",this.cedulaProfesional="",this.especialidad="",this.genero="",this.isCooldownActualizar=!1,this.validator=new P.t(this.messageService),this.maxDate.setFullYear((new Date).getFullYear()-18),this.fechaNacimiento=this.maxDate}ngOnInit(){var o=this;return(0,g.A)(function*(){o.primengConfig.ripple=!0,(0,l.G)(o.primengConfig),yield o.buscarDoctor()})()}buscarDoctor(){var o=this;return(0,g.A)(function*(){const c=yield o.remoteDoctor.buscarDoctorPorId();if("Right"===c._tag){const t=c.right;o.clave=t.clave,o.nombre=t.nombre,o.apellidoPaterno=t.apellidoPaterno,o.apellidoMaterno=t.apellidoMaterno;const[p,n,w]=t.fechaNacimiento.split("-").map(Number);o.fechaNacimiento=new Date(p,n-1,w),o.telefono=t.telefono,o.genero=t.genero,o.correo=t.correo,o.cedulaProfesional=t.cedulaProfesional,o.especialidad=t.especialidad}"Left"===c._tag&&o.mensageAlerta({title:"Error al cargar datos",message:"Ocurri\xf3 un problema al intentar cargar sus datos, por favor, int\xe9ntalo m\xe1s tarde",type:"error"})})()}actionSecondButton(){var o=this;return(0,g.A)(function*(){if(o.enable)return o.enable=!1,o.labelFirstButton="Cancelar",o.severity="danger",void(o.labelSecondButton="Guardar informaci\xf3n");if(o.validarDatos()){if(o.isCooldownActualizar)return void o.mensageAlerta({title:"Solicitud en espera",message:"Por favor, espere 5 segundos antes de volver a intentarlo",type:"info"});o.isCooldownActualizar=!0,yield o.actualizarDatos(),setTimeout(()=>{o.isCooldownActualizar=!1},5e3)}})()}actualizarDatos(){var o=this;return(0,g.A)(function*(){const c=new C.v({clave:o.clave,nombre:o.nombre,apellidoPaterno:o.apellidoPaterno,apellidoMaterno:o.apellidoMaterno,fechaNacimiento:o.fechaNacimiento.toLocaleDateString("en-CA"),genero:o.genero,telefono:o.telefono,especialidad:o.especialidad,cedulaProfesional:o.cedulaProfesional,correo:o.correo}),t=yield o.remoteDoctor.actualizarDoctor(c);if("Right"!==t._tag){if("Left"===t._tag){if(t.left instanceof D.ep)return void o.mensageAlerta({title:"Correo ya registrado",message:"Por favor, usa un correo diferente"});o.mensageAlerta({title:"Error al actualizar datos",message:"Ocurri\xf3 un problema al intentar actualizar sus datos, por favor, int\xe9ntalo m\xe1s tarde",type:"error"})}}else o.mensageAlerta({title:"\xc9xito",message:"Los datos se han actualizado exitosamente",type:"success"})})()}actionFirstButton(){var o=this;return(0,g.A)(function*(){if(!o.enable)return o.enable=!0,o.severity="info",o.labelFirstButton="Cambiar contrase\xf1a",void(o.labelSecondButton="Editar informaci\xf3n");o.mensageAlerta({title:"Funcionalidad en Desarrollo",message:"Estamos trabajando para mejorar esta funci\xf3n y ofrecer una mejor experiencia",type:"info"})})()}validarDatos(){return!!(this.validator.validarNombre(this.nombre)&&this.validator.validarApellidoPaterno(this.apellidoPaterno)&&this.validator.validarApellidoMaterno(this.apellidoMaterno)&&this.validator.validarFechaNacimiento(this.fechaNacimiento,this.maxDate,"doctor")&&this.validator.validarGenero(this.genero)&&this.validator.validarTelefono(this.telefono)&&this.validator.validarCampoCorreo(this.correo)&&this.validator.validarCampo(this.cedulaProfesional,"C\xe9dula profesional"))&&this.validator.validarCampo(this.especialidad,"Especialidad")}mensageAlerta({title:o="Alerta",message:c,type:t="warn",life:p=3e3}){this.messageService.add({severity:t,summary:o,detail:c,life:p})}static{this.\u0275fac=function(c){return new(c||r)(e.rXU(x.Y),e.rXU(f.r1),e.rXU(f.bg),e.rXU(E.F))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-perfil"]],decls:52,vars:31,consts:[[1,"flex","flex-wrap","flex-column","p-2"],[1,"flex","py-3","px-5","mt-2","mb-4","border-round-xl","bg-white","w-full","shadow-5"],[1,"font-bold","text-3xl"],[1,"flex","flex-column","px-3","py-3","border-round-2xl"],[1,"flex","flex-column","py-3","row-gap-5"],[1,"flex","flex-column"],[1,"grid","contact-section","border-round-2xl","border-2","border-200","shadow-2",2,"padding","1.5rem"],[1,"field"],[1,"font-semibold","text-base"],["type","text","pInputText","","disabled","true","placeholder","ABC-1234",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","pInputText","","placeholder","Juan","maxlength","50",1,"custom-input",3,"ngModelChange","disabled","ngModel"],["type","text","pInputText","","placeholder","Garc\xeda","maxlength","50",1,"custom-input",3,"ngModelChange","disabled","ngModel"],["type","text","pInputText","","placeholder","P\xe9rez","maxlength","50",1,"custom-input",3,"ngModelChange","disabled","ngModel"],["dateFormat","dd/mm/yy","showIcon","true","inputId","edad","readonlyInput","true",3,"ngModelChange","disabled","ngModel","maxDate"],["placeholder","Seleccione el g\xe9nero",1,"min-w-full",3,"ngModelChange","disabled","options","ngModel"],["type","text","pInputText","","placeholder","1234567890","maxlength","10","minlength","10",1,"custom-input",3,"ngModelChange","disabled","ngModel"],["type","text","pInputText","","placeholder","ejemplo@correo.com","maxlength","70",1,"custom-input",3,"ngModelChange","disabled","ngModel"],["type","text","pInputText","","placeholder","12345","maxlength","30",1,"custom-input",3,"ngModelChange","disabled","ngModel"],["type","text","pInputText","","placeholder","Endocrinolog\xeda","maxlength","30",1,"custom-input",3,"ngModelChange","disabled","ngModel"],[1,"flex","flex-wrap","justify-content-end","gap-3","mt-2","mb-4","border-round-xl",2,"text-align","right"],[1,"flex-grow-1","sm:flex-grow-0","w-full","sm:w-auto",3,"onClick","label","severity","outlined"],[1,"flex-grow-1","sm:flex-grow-0","w-full","sm:w-auto",3,"onClick","label"]],template:function(c,t){1&c&&(e.nrm(0,"p-toast"),e.j41(1,"div",0)(2,"div",1)(3,"p",2),e.EFF(4,"Mis datos"),e.k0s()(),e.j41(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"p",8),e.EFF(11,"Clave"),e.k0s(),e.j41(12,"input",9),e.mxI("ngModelChange",function(n){return e.DH7(t.clave,n)||(t.clave=n),n}),e.k0s()(),e.j41(13,"div",7)(14,"p",8),e.EFF(15,"Nombre(s)"),e.k0s(),e.j41(16,"input",10),e.mxI("ngModelChange",function(n){return e.DH7(t.nombre,n)||(t.nombre=n),n}),e.k0s()(),e.j41(17,"div",7)(18,"p",8),e.EFF(19,"Apellido Paterno"),e.k0s(),e.j41(20,"input",11),e.mxI("ngModelChange",function(n){return e.DH7(t.apellidoPaterno,n)||(t.apellidoPaterno=n),n}),e.k0s()(),e.j41(21,"div",7)(22,"p",8),e.EFF(23,"Apellido Materno"),e.k0s(),e.j41(24,"input",12),e.mxI("ngModelChange",function(n){return e.DH7(t.apellidoMaterno,n)||(t.apellidoMaterno=n),n}),e.k0s()(),e.j41(25,"div",7)(26,"p",8),e.EFF(27,"Fecha de nacimiento"),e.k0s(),e.j41(28,"p-calendar",13),e.mxI("ngModelChange",function(n){return e.DH7(t.fechaNacimiento,n)||(t.fechaNacimiento=n),n}),e.k0s()(),e.j41(29,"div",7)(30,"p",8),e.EFF(31,"G\xe9nero"),e.k0s(),e.j41(32,"p-dropdown",14),e.mxI("ngModelChange",function(n){return e.DH7(t.genero,n)||(t.genero=n),n}),e.k0s()(),e.j41(33,"div",7)(34,"p",8),e.EFF(35,"Tel\xe9fono"),e.k0s(),e.j41(36,"input",15),e.mxI("ngModelChange",function(n){return e.DH7(t.telefono,n)||(t.telefono=n),n}),e.k0s()(),e.j41(37,"div",7)(38,"p",8),e.EFF(39,"Correo"),e.k0s(),e.j41(40,"input",16),e.mxI("ngModelChange",function(n){return e.DH7(t.correo,n)||(t.correo=n),n}),e.k0s()(),e.j41(41,"div",7)(42,"p",8),e.EFF(43,"C\xe9dula profesional"),e.k0s(),e.j41(44,"input",17),e.mxI("ngModelChange",function(n){return e.DH7(t.cedulaProfesional,n)||(t.cedulaProfesional=n),n}),e.k0s()(),e.j41(45,"div",7)(46,"p",8),e.EFF(47,"Especialidad"),e.k0s(),e.j41(48,"input",18),e.mxI("ngModelChange",function(n){return e.DH7(t.especialidad,n)||(t.especialidad=n),n}),e.k0s()()()()()(),e.j41(49,"div",19)(50,"p-button",20),e.bIt("onClick",function(){return t.actionFirstButton()}),e.k0s(),e.j41(51,"p-button",21),e.bIt("onClick",function(){return t.actionSecondButton()}),e.k0s()()()),2&c&&(e.R7$(12),e.R50("ngModel",t.clave),e.R7$(4),e.Y8G("disabled",t.enable),e.R50("ngModel",t.nombre),e.R7$(4),e.Y8G("disabled",t.enable),e.R50("ngModel",t.apellidoPaterno),e.R7$(4),e.Y8G("disabled",t.enable),e.R50("ngModel",t.apellidoMaterno),e.R7$(4),e.Aen(e.lJ4(29,I)),e.Y8G("disabled",t.enable),e.R50("ngModel",t.fechaNacimiento),e.Y8G("maxDate",t.maxDate),e.R7$(4),e.Aen(e.lJ4(30,I)),e.Y8G("disabled",t.enable)("options",t.generos),e.R50("ngModel",t.genero),e.R7$(4),e.Y8G("disabled",t.enable),e.R50("ngModel",t.telefono),e.R7$(4),e.Y8G("disabled",t.enable),e.R50("ngModel",t.correo),e.R7$(4),e.Y8G("disabled",t.enable),e.R50("ngModel",t.cedulaProfesional),e.R7$(4),e.Y8G("disabled",t.enable),e.R50("ngModel",t.especialidad),e.R7$(2),e.Y8G("label",t.labelFirstButton)("severity",t.severity)("outlined",!0),e.R7$(),e.Y8G("label",t.labelSecondButton))},dependencies:[b.S,s.me,s.BC,s.xh,s.tU,s.vS,M.$n,h.ms,T.Vv,A.y8],styles:['@charset "UTF-8";.margin-vertical[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:.25rem}.custom-input[_ngcontent-%COMP%]{padding:.75rem;font-size:1rem;border:1px solid #d1d5db;border-radius:.5rem;width:100%}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(16rem,1fr));gap:1rem;grid-auto-rows:min-content;align-content:space-around;height:auto}@media (min-width: 1200px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}@media (min-width: 768px) and (max-width: 1199px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 768px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 480px){.grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.responsive-button[_ngcontent-%COMP%]{width:100%}}']})}}return r})(),F=(()=>{class r{static{this.\u0275fac=function(c){return new(c||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[v.iI.forChild([{path:"",component:y}]),v.iI]})}}return r})();var d=a(563);let i=(()=>{class r{static{this.\u0275fac=function(c){return new(c||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({providers:[f.bg],imports:[m.MD,F,b.u,s.YN,M.tm,d.Z,h.kr,T.rO,A.MB]})}}return r})()},7087:(k,j,a)=>{function m(v){v.setTranslation({accept:"Aceptar",reject:"Cancelar",dayNames:["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"],dayNamesShort:["dom","lun","mar","mi\xe9","jue","vie","s\xe1b"],dayNamesMin:["D","L","M","X","J","V","S"],monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],today:"Hoy",clear:"Limpiar",dateFormat:"dd/mm/yy",weekHeader:"Sm"})}a.d(j,{G:()=>m})},7608:(k,j,a)=>{a.d(j,{F:()=>I});var m=a(467),v=a(6914),g=a(1626),C=a(4843),l=a(7673),P=a(8208);let D=(()=>{class y{static{this.postDoctor=`${P.p}/autenticacion/doctores/auth/registro`}static{this.loginDoctor=`${P.p}/autenticacion/doctores/auth`}static{this.updateDoctor=`${P.p}/autenticacion/doctores`}static{this.updatePassword=`${P.p}/autenticacion/doctores`}static{this.validateCorreo=`${P.p}/autenticacion/doctores/auth/`}static{this.resetPassword=`${P.p}/autenticacion/doctores/`}static{this.findById=`${P.p}/doctores/`}}return y})();var e=a(1635),x=a(4706);class f{constructor(F={}){this.claveDoctor=F.id||"",this.usuario=F.usuario||"",this.correo=F.correo||"",this.token=F.token||"",this.fechaExpiracion=F.fechaExpiracion}}(0,e.Cg)([(0,x.v)({name:"id"})],f.prototype,"claveDoctor",void 0),(0,e.Cg)([(0,x.v)({name:"fecha_expiracion"})],f.prototype,"fechaExpiracion",void 0);var E=a(6354),b=a(9437),s=a(6010),M=a(1510),h=a(4626),T=a(4438),A=a(1948);let I=(()=>{class y{constructor(d,i){this.local=d,this.http=i}buscarDoctorPorId(){var d=this;return(0,m.A)(function*(){const i=`${D.findById}${d.local.getIdDoctor()}`;return(0,C._)(d.http.get(i,{headers:d.getHeaders()}).pipe((0,E.T)(r=>(0,s.pG)((0,h.bj)(v.v,r))),(0,b.W)(r=>(0,l.of)((0,s.kb)(Error(r.message))))))})()}altaDoctor(d){var i=this;return(0,m.A)(function*(){return(0,C._)(i.http.post(D.postDoctor,(0,h.fL)(d)).pipe((0,E.T)(u=>(i.local.saveAuthResponseModel((0,h.bj)(f,u)),(0,s.pG)(!0))),(0,b.W)(u=>(0,l.of)((0,s.kb)(400===u.status?new M.ep:Error(u.message))))))})()}loginDoctor(d){var i=this;return(0,m.A)(function*(){return(0,C._)(i.http.post(D.loginDoctor,(0,h.fL)(d)).pipe((0,E.T)(u=>(i.local.saveAuthResponseModel((0,h.bj)(f,u)),(0,s.pG)(!0))),(0,b.W)(u=>(0,l.of)((0,s.kb)(401===u.status?new M.mQ:404===u.status?new M.lB:500===u.status?new M.GI:Error(u.message))))))})()}actualizarDoctor(d){var i=this;return(0,m.A)(function*(){return d.clave=i.local.getClaveDoctor(),(0,C._)(i.http.put(`${D.updateDoctor}`,(0,h.fL)(d),{headers:i.getHeaders()}).pipe((0,E.T)(r=>{const u=(0,h.bj)(f,r);return i.local.setToken(u.token),(0,s.pG)(!0)}),(0,b.W)(r=>(0,l.of)((0,s.kb)(400===r.status?new M.ep:Error(r.message))))))})()}actualizarPassword(d){var i=this;return(0,m.A)(function*(){return d.id=i.local.getIdDoctor(),(0,C._)(i.http.patch(`${D.updatePassword}`,(0,h.fL)(d),{headers:i.getHeaders()}).pipe((0,E.T)(r=>{const u=(0,h.bj)(f,r);return i.local.setToken(u.token),(0,s.pG)(!0)}),(0,b.W)(r=>(0,l.of)((0,s.kb)(Error(r.message))))))})()}validarCorreo(d){var i=this;return(0,m.A)(function*(){return(0,C._)(i.http.get(`${D.validateCorreo}${d}`).pipe((0,E.T)(u=>{const o=(0,h.bj)(f,u);return i.local.setToken(o.token),(0,s.pG)(!0)}),(0,b.W)(u=>(0,l.of)((0,s.kb)(404===u.status?new M.lB:Error(u.message))))))})()}reestablecerPassword(d){var i=this;return(0,m.A)(function*(){return(0,C._)(i.http.patch(D.resetPassword,(0,h.fL)(d),{headers:i.getHeaders()}).pipe((0,E.T)(r=>{const u=(0,h.bj)(f,r);return i.local.setToken(u.token),(0,s.pG)(!0)}),(0,b.W)(r=>(0,l.of)((0,s.kb)(404===r.status?new M.lB:Error(r.message))))))})()}getHeaders(){return new g.Lr({Authorization:`Bearer ${this.local.getToken()}`,"Content-Type":"application/json"})}static{this.\u0275fac=function(i){return new(i||y)(T.KVO(A.s),T.KVO(g.Qq))}}static{this.\u0275prov=T.jDH({token:y,factory:y.\u0275fac,providedIn:"root"})}}return y})()},6914:(k,j,a)=>{a.d(j,{v:()=>g});var m=a(1635),v=a(4706);class g{constructor(l={}){this.clave=l.clave||void 0,this.nombre=l.nombre||"",this.apellidoPaterno=l.apellidoPaterno||"",this.apellidoMaterno=l.apellidoMaterno||"",this.fechaNacimiento=l.fechaNacimiento||"",this.genero=l.genero||"",this.telefono=l.telefono||"",this.especialidad=l.especialidad||"",this.cedulaProfesional=l.cedulaProfesional||"",this.correo=l.correo||"",this.password=l.password||void 0}}(0,m.Cg)([(0,v.v)({name:"apellido_paterno"})],g.prototype,"apellidoPaterno",void 0),(0,m.Cg)([(0,v.v)({name:"apellido_materno"})],g.prototype,"apellidoMaterno",void 0),(0,m.Cg)([(0,v.v)({name:"fecha_nacimiento"})],g.prototype,"fechaNacimiento",void 0),(0,m.Cg)([(0,v.v)({name:"cedula_profesional"})],g.prototype,"cedulaProfesional",void 0)}}]);