"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[35],{1510:(_,E,i)=>{i.d(E,{$C:()=>s,GI:()=>e,ep:()=>g,lB:()=>c,mQ:()=>r});class s extends Error{}class r extends Error{}class c extends Error{}class g extends Error{}class e extends Error{}},35:(_,E,i)=>{i.r(E),i.d(E,{DashboardPacientesModule:()=>U});var s=i(177),r=i(3607),c=i(467),g=i(8404),e=i(4438),a=i(7693),h=i(5779),D=i(8777),F=i(3571),v=i(1851),m=i(1141),y=i(5366),j=i(2242),G=i(1570),N=i(4341),R=i(9883),A=i(1305),O=i(7722);const S=["filter"],V=()=>["/pacientes/alta"],k=()=>["folio","genero","tipoDiabetes","peso","talla","imc","factorActividad"],$=()=>({width:"35rem",height:"40rem","max-width":"40rem","overflow-x":"hidden"}),I=()=>({width:"100%"});function x(p,T){if(1&p){const t=e.RV6();e.j41(0,"div",46)(1,"div",47)(2,"button",48),e.bIt("click",function(){e.eBV(t);const o=e.XpG(),l=e.sdS(34);return e.Njj(o.clear(l))}),e.k0s(),e.j41(3,"button",49),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.recargarListaPacientes())}),e.k0s()(),e.j41(4,"span",50),e.nrm(5,"i",51),e.j41(6,"input",52,1),e.bIt("input",function(o){e.eBV(t);const l=e.XpG(),C=e.sdS(34);return e.Njj(l.onGlobalFilter(C,o))}),e.k0s()()()}}function M(p,T){1&p&&(e.j41(0,"tr")(1,"th",53),e.EFF(2,"Folio"),e.k0s(),e.j41(3,"th",54),e.EFF(4,"Edad"),e.k0s(),e.j41(5,"th",54),e.EFF(6,"G\xe9nero"),e.k0s(),e.j41(7,"th",55),e.EFF(8,"# Miembros en el hogar"),e.k0s(),e.j41(9,"th",56),e.EFF(10,"Tipo de Diabetes"),e.k0s(),e.j41(11,"th",56),e.EFF(12,"Tiempo con Diabetes"),e.k0s(),e.j41(13,"th",54),e.EFF(14,"Peso (kgs)"),e.k0s(),e.j41(15,"th",54),e.EFF(16,"Talla (cms)"),e.k0s(),e.j41(17,"th",55),e.EFF(18,"IMC"),e.k0s(),e.j41(19,"th",54),e.EFF(20,"Calor\xedas al d\xeda"),e.k0s(),e.j41(21,"th",56),e.EFF(22,"Factor de Actividad"),e.k0s()())}function b(p,T){if(1&p&&(e.j41(0,"tr",57)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s(),e.j41(17,"td"),e.EFF(18),e.k0s(),e.j41(19,"td"),e.EFF(20),e.k0s(),e.j41(21,"td"),e.EFF(22),e.k0s()()),2&p){const t=T.$implicit;e.Y8G("pSelectableRow",t),e.R7$(2),e.JRh(t.folio),e.R7$(2),e.SpI("",t.calcularEdad()," a\xf1os"),e.R7$(2),e.JRh(t.genero),e.R7$(2),e.JRh(t.numMiembrosHogar),e.R7$(2),e.JRh(t.tipoDiabetes),e.R7$(2),e.JRh(t.tiempoDiabetes),e.R7$(2),e.JRh(t.peso),e.R7$(2),e.JRh(t.talla),e.R7$(2),e.JRh(t.imc),e.R7$(2),e.JRh(t.caloriasDia),e.R7$(2),e.JRh(t.factorActividad)}}function f(p,T){1&p&&(e.j41(0,"tr")(1,"td",58),e.EFF(2,"No se encontraron pacientes"),e.k0s()())}function P(p,T){1&p&&(e.j41(0,"tr")(1,"td",58),e.EFF(2,"Cargando datos. Por favor espere."),e.k0s()())}let u=(()=>{class p{constructor(t,n,o,l,C,d,W,J){this.layoutService=t,this.primeNGConfig=n,this.router=o,this.route=l,this.messageService=C,this.remote=d,this.remoteNotificacion=W,this.remoteReporte=J,this.loading=!0,this.visible=!1,this.isAccessVisible=!0,this.grupos={General:"General","Grupo 1 - Diab\xe9tico Descontrolado":"Descontrolado","Grupo 2 - Pluripatolog\xeda":"Multidiagn\xf3stico","Grupo 3 - Ejercicio y Alimentaci\xf3n":"Actividad f\xedsica","Grupo 4 - Apoyo":"Apoyo emocional"},this.tiposNotificacion=["Recomendaci\xf3n","Sugerencia","Aclaraci\xf3n"],this.prioridades=["Alta","Media","Baja"],this.programas=Object.keys(this.grupos)}ngOnInit(){var t=this;return(0,c.A)(function*(){t.primeNGConfig.ripple=!0;const n=yield t.remote.buscarPacientes();"Right"===n._tag&&(t.pacientes=n.right.sort((o,l)=>o.folio&&l.folio?o.folio-l.folio:0)),"Left"===n._tag&&(t.pacientes=[]),t.loading=!1})()}guardarNotificacion(){var t=this;return(0,c.A)(function*(){if(!t.validarNotificacion())return;const n=new g.S({titulo:t.tituloNotificacion,tipo:t.selectedTipoNotificacion,prioridad:t.selectedPrioridad,tipoPrograma:t.grupos[t.selectedPrograma],descripcion:t.descripcionNotificacion}),o=yield t.remoteNotificacion.nuevaNotificacion(n);"Right"===o._tag&&t.mensageAlerta({title:"\xc9xito",message:"Notificaci\xf3n guardada con \xe9xito",type:"success"}),"Left"===o._tag&&t.mensageAlerta({title:"Ocurri\xf3 un problema al intentar guardar la notificaci\xf3n",message:"Por favor, verifica tu conexi\xf3n a internet e int\xe9ntalo nuevamente",type:"error",life:5e3}),t.cerrarVentanaNotificacion()})()}showDialog(){this.visible=!0}onRowSelect(t){var n=this;return(0,c.A)(function*(){yield n.router.navigate(["../perfil"],{relativeTo:n.route,queryParams:{folio:t.data.folio}})})()}validarNotificacion(){let t="";return this.tituloNotificacion&&""!==this.tituloNotificacion.trim()?this.tituloNotificacion.trim().length>50?(t='El campo "T\xedtulo" no puede exceder los 50 caracteres',this.mensageAlerta({message:t}),!1):this.selectedTipoNotificacion&&""!==this.selectedTipoNotificacion.trim()?this.selectedPrioridad&&""!==this.selectedPrioridad.trim()?"General"==this.selectedPrioridad||this.selectedPrograma&&""!==this.selectedPrograma.trim()?this.descripcionNotificacion&&""!==this.descripcionNotificacion.trim()?!(this.descripcionNotificacion.trim().length>199&&(t='El campo "Descripci\xf3n" no puede exceder los 199 caracteres',this.mensageAlerta({message:t}),1)):(t='El campo "Descripci\xf3n" es obligatorio y no puede estar vac\xedo',this.mensageAlerta({message:t}),!1):(t='Por favor, selecciona una opci\xf3n v\xe1lida en el campo "Programa"',this.mensageAlerta({message:t}),!1):(t='Por favor, selecciona una opci\xf3n v\xe1lida en el campo "Prioridad"',this.mensageAlerta({message:t}),!1):(t='Por favor, selecciona una opci\xf3n v\xe1lida en el campo "Tipo de notificaci\xf3n"',this.mensageAlerta({message:t}),!1):(t='El campo "T\xedtulo" es obligatorio y no puede estar vac\xedo',this.mensageAlerta({message:t}),!1)}recargarListaPacientes(){var t=this;return(0,c.A)(function*(){t.loading=!0;const n=yield t.remote.buscarPacientes();"Right"===n._tag&&(t.pacientes=n.right.sort((o,l)=>o.folio&&l.folio?o.folio-l.folio:0),t.mensageAlerta({title:"\xc9xito",message:"Lista de pacientes actualizada",type:"success"})),"Left"===n._tag&&t.mensageAlerta({title:"Ocurri\xf3 un problema al intentar recargar la lista de paciente",message:"Por favor, verifica tu conexi\xf3n a internet e int\xe9ntalo nuevamente",type:"error",life:5e3}),t.loading=!1})()}exportarDatos(){var t=this;return(0,c.A)(function*(){const n=yield t.remoteReporte.generarExcelRespuestas();"Right"===n._tag&&t.mensageAlerta({title:"\xc9xito",message:"El reporte de pacientes se gener\xf3 correctamente",type:"success"}),"Left"===n._tag&&t.mensageAlerta({title:"Error al exportar datos",message:"Hubo un problema al generar el reporte de pacientes, por favor, int\xe9ntelo nuevamente",type:"error"})})()}cerrarVentanaNotificacion(){this.visible=!1,this.tituloNotificacion="",this.descripcionNotificacion="",this.selectedPrioridad="",this.selectedPrograma="",this.selectedTipoNotificacion=""}onGlobalFilter(t,n){t.filterGlobal(n.target.value,"contains")}clear(t){t.clear(),this.filter.nativeElement.value=""}toggleAccess(){this.isAccessVisible=!this.isAccessVisible}handleKeyPress(t){("Enter"===t.key||" "===t.key)&&(t.preventDefault(),this.toggleAccess())}mensageAlerta({title:t="Alerta",message:n,type:o="warn",life:l=4e3}){this.messageService.add({severity:o,summary:t,detail:n,life:l})}static{this.\u0275fac=function(n){return new(n||p)(e.rXU(a.Y),e.rXU(h.r1),e.rXU(r.Ix),e.rXU(r.nX),e.rXU(h.bg),e.rXU(D.H),e.rXU(F.S),e.rXU(v.P))}}static{this.\u0275cmp=e.VBU({type:p,selectors:[["app-pacientes"]],viewQuery:function(n,o){if(1&n&&e.GBs(S,5),2&n){let l;e.mGM(l=e.lsd())&&(o.filter=l.first)}},decls:78,vars:36,consts:[["dt2",""],["filter",""],[1,"flex","flex-column","border-round-2xl","w-full","mx-0","px-0"],[1,"card","mb-0","shadow-2"],[1,"flex","flex-wrap","justify-content-start"],["aria-controls","access-container",1,"font-semibold","text-500","text-3xl","no-border",3,"click","keydown"],["id","access-container",1,"quick-access"],[1,"flex","flex-wrap","justify-content-start","gap-4","mt-3"],[1,"flex","flex-column","border-round-xl","shadow-5","agregar-paciente",2,"min-width","10rem","max-width","14rem"],[1,"flex","flex-row","items-center","gap-3","border-round-top-xl",2,"padding","1rem"],[1,"pi","pi-user-plus",2,"font-size","2.5rem","color","#ffffff","align-self","center"],[1,"flex","flex-column",2,"justify-content","center"],[1,"font-light","text-white","m-0"],[1,"flex","button-agregar-paciente","justify-content-center","p-3","border-round-bottom-xl","cursor-pointer","no-underline",3,"routerLink"],[1,"font-semibold","text-white","m-0"],[1,"flex","flex-column","border-round-xl","shadow-5","agregar-recomendacion",2,"min-width","10rem","max-width","14rem"],[1,"pi","pi-bell",2,"font-size","2.5rem","color","#ffffff","align-self","center"],[1,"flex","button-agregar-recomendacion","justify-content-center","p-3","border-round-bottom-xl","cursor-pointer","no-underline",3,"click"],[1,"flex","flex-column","p-5","border-round-2xl","w-full","mx-0","px-0"],[1,"flex","flex-wrap","justify-content-between","align-items-center"],[1,"font-semibold","text-500","text-3xl"],["pButton","","label","Exportar datos","icon","pi pi-file-excel",1,"p-button-outlined","mb-2","custom-excel-button",3,"click"],[1,"md:mt-3"],["dataKey","folio","responsiveLayout","scroll","selectionMode","single",3,"onRowSelect","value","rows","loading","rowHover","paginator","globalFilterFields"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],["header","Nueva notificaci\xf3n",3,"visibleChange","onHide","modal","visible"],[1,"flex","flex-wrap","flex-column","justify-content-center","mx-3","my-3"],[1,"flex","flex-wrap","flex-column"],[1,"flex","flex-wrap","justify-content-start","mb-2"],[1,"font-semibold","text-lg"],[1,"flex","flex-wrap"],["type","text","pInputText","","placeholder","Escribe un t\xedtulo breve...","maxlength","50",1,"w-full",3,"ngModelChange","ngModel"],[1,"flex","flex-wrap","flex-column","my-3"],[1,"w-full"],["placeholder","Seleccione el tipo de notificaci\xf3n",3,"ngModelChange","options","ngModel"],["placeholder","Seleccione la prioridad",1,"min-w-full",3,"ngModelChange","options","ngModel"],["placeholder","Seleccione el programa de salud",1,"min-w-full",3,"ngModelChange","options","ngModel","disabled"],["rows","8","cols","55","pInputTextarea","","placeholder","Proporcione una descripci\xf3n detallada...","maxlength","199",1,"w-full",2,"resize","none",3,"ngModelChange","ngModel"],[1,"flex","flex-wrap","flex-row","justify-content-end","mt-6"],[1,"flex","mr-3"],["label","Cancelar","severity","danger",3,"onClick","outlined"],["label","Guardar",3,"onClick"],[1,"flex","justify-content-between","flex-column","sm:flex-row"],[1,"flex","gap-2"],["pButton","","label","Limpiar filtro","icon","pi pi-trash",1,"p-button-outlined","mb-2",3,"click"],["pButton","","label","Recargar","icon","pi pi-refresh",1,"p-button-outlined","mb-2",3,"click"],[1,"p-input-icon-left","mb-2"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar Folio, G\xe9nero, Tipo de Diabetes, Peso...",1,"w-full",3,"input"],["scope","col",2,"min-width","6rem"],["scope","col",2,"min-width","10rem"],["scope","col",2,"min-width","8rem"],["scope","col",2,"min-width","12rem"],[3,"pSelectableRow"],["colspan","11"]],template:function(n,o){if(1&n){const l=e.RV6();e.nrm(0,"p-toast"),e.j41(1,"div",2)(2,"div",3)(3,"div",4)(4,"button",5),e.bIt("click",function(){return e.eBV(l),e.Njj(o.toggleAccess())})("keydown",function(d){return e.eBV(l),e.Njj(o.handleKeyPress(d))}),e.EFF(5," Accesos R\xe1pidos "),e.k0s()(),e.j41(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),e.nrm(10,"i",10),e.j41(11,"div",11)(12,"p",12),e.EFF(13,"Registro de informaci\xf3n m\xe9dica"),e.k0s()()(),e.j41(14,"a",13)(15,"p",14),e.EFF(16,"Nuevo paciente"),e.k0s()()(),e.j41(17,"div",15)(18,"div",9),e.nrm(19,"i",16),e.j41(20,"div",11)(21,"p",12),e.EFF(22,"Env\xeda notificaciones a tus pacientes"),e.k0s()()(),e.j41(23,"a",17),e.bIt("click",function(){return e.eBV(l),e.Njj(o.showDialog())}),e.j41(24,"p",14),e.EFF(25,"Nueva notificaci\xf3n"),e.k0s()()()()()()(),e.j41(26,"div",18)(27,"div",3)(28,"div",19)(29,"p",20),e.EFF(30,"Pacientes"),e.k0s(),e.j41(31,"button",21),e.bIt("click",function(){return e.eBV(l),e.Njj(o.exportarDatos())}),e.k0s()(),e.j41(32,"div",22)(33,"p-table",23,0),e.bIt("onRowSelect",function(d){return e.eBV(l),e.Njj(o.onRowSelect(d))}),e.DNE(35,x,8,0,"ng-template",24)(36,M,23,0,"ng-template",25)(37,b,23,12,"ng-template",26)(38,f,3,0,"ng-template",27)(39,P,3,0,"ng-template",28),e.k0s()()()(),e.j41(40,"p-dialog",29),e.mxI("visibleChange",function(d){return e.eBV(l),e.DH7(o.visible,d)||(o.visible=d),e.Njj(d)}),e.bIt("onHide",function(){return e.eBV(l),e.Njj(o.cerrarVentanaNotificacion())}),e.j41(41,"div",30)(42,"div",31)(43,"div",32)(44,"p",33),e.EFF(45,"T\xedtulo"),e.k0s()(),e.j41(46,"div",34)(47,"input",35),e.mxI("ngModelChange",function(d){return e.eBV(l),e.DH7(o.tituloNotificacion,d)||(o.tituloNotificacion=d),e.Njj(d)}),e.k0s()()(),e.j41(48,"div",36)(49,"div",32)(50,"p",33),e.EFF(51,"Tipo de notificaci\xf3n"),e.k0s()(),e.j41(52,"div",37)(53,"p-dropdown",38),e.mxI("ngModelChange",function(d){return e.eBV(l),e.DH7(o.selectedTipoNotificacion,d)||(o.selectedTipoNotificacion=d),e.Njj(d)}),e.k0s()()(),e.j41(54,"div",36)(55,"div",32)(56,"p",33),e.EFF(57,"Prioridad"),e.k0s()(),e.j41(58,"div",37)(59,"p-dropdown",39),e.mxI("ngModelChange",function(d){return e.eBV(l),e.DH7(o.selectedPrioridad,d)||(o.selectedPrioridad=d),e.Njj(d)}),e.k0s()()(),e.j41(60,"div",36)(61,"div",32)(62,"p",33),e.EFF(63,"Programa"),e.k0s()(),e.j41(64,"div",37)(65,"p-dropdown",40),e.mxI("ngModelChange",function(d){return e.eBV(l),e.DH7(o.selectedPrograma,d)||(o.selectedPrograma=d),e.Njj(d)}),e.k0s()()(),e.j41(66,"div",31)(67,"div",32)(68,"p",33),e.EFF(69,"Descripci\xf3n"),e.k0s()(),e.j41(70,"div",34)(71,"textarea",41),e.mxI("ngModelChange",function(d){return e.eBV(l),e.DH7(o.descripcionNotificacion,d)||(o.descripcionNotificacion=d),e.Njj(d)}),e.EFF(72,"                "),e.k0s()()(),e.j41(73,"div",42)(74,"div",43)(75,"p-button",44),e.bIt("onClick",function(){return e.eBV(l),e.Njj(o.cerrarVentanaNotificacion())}),e.k0s()(),e.j41(76,"div")(77,"p-button",45),e.bIt("onClick",function(){return e.eBV(l),e.Njj(o.guardarNotificacion())}),e.k0s()()()()()}2&n&&(e.R7$(4),e.BMQ("aria-expanded",o.isAccessVisible),e.R7$(2),e.AVh("show",o.isAccessVisible),e.R7$(8),e.Y8G("routerLink",e.lJ4(30,V)),e.R7$(19),e.Y8G("value",o.pacientes)("rows",15)("loading",o.loading)("rowHover",!0)("paginator",!0)("globalFilterFields",e.lJ4(31,k)),e.R7$(7),e.Aen(e.lJ4(32,$)),e.Y8G("modal",!0),e.R50("visible",o.visible),e.R7$(7),e.R50("ngModel",o.tituloNotificacion),e.R7$(6),e.Aen(e.lJ4(33,I)),e.Y8G("options",o.tiposNotificacion),e.R50("ngModel",o.selectedTipoNotificacion),e.R7$(6),e.Aen(e.lJ4(34,I)),e.Y8G("options",o.prioridades),e.R50("ngModel",o.selectedPrioridad),e.R7$(6),e.Aen(e.lJ4(35,I)),e.Y8G("options",o.programas),e.R50("ngModel",o.selectedPrograma),e.Y8G("disabled","General"===o.selectedPrioridad),e.R7$(6),e.R50("ngModel",o.descripcionNotificacion),e.R7$(4),e.Y8G("outlined",!0))},dependencies:[r.Wk,h.Ei,m._f,m.$n,y.XI,y.d5,j.S,G.l,N.me,N.BC,N.tU,N.vS,R.ms,A.Z,O.y8],styles:['@charset "UTF-8";.agregar-paciente[_ngcontent-%COMP%]{background-color:#219ebc}.button-agregar-paciente[_ngcontent-%COMP%]{background-color:#47c7f6;border-color:#47c7f6}.agregar-recomendacion[_ngcontent-%COMP%]{background-color:#fb8500}.button-agregar-recomendacion[_ngcontent-%COMP%]{background-color:#faae51;border-color:#faae51}.no-border[_ngcontent-%COMP%]{border:none;padding:0;background:none;font:inherit;color:inherit;text-align:left;cursor:pointer}.no-border[_ngcontent-%COMP%]:focus{outline:none;text-decoration:underline}.quick-access[_ngcontent-%COMP%]{overflow:hidden;max-height:0;opacity:0;transition:max-height .3s ease-out,opacity .3s ease-out}.quick-access.show[_ngcontent-%COMP%]{max-height:500px;opacity:1}.quick-access[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.quick-access[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:5px 0}.custom-excel-button[_ngcontent-%COMP%]{border-color:#28a745;color:#28a745;background-color:transparent;transition:all .3s ease}.custom-excel-button[_ngcontent-%COMP%]:hover{background-color:#28a745;color:#fff;border-color:#28a745}']})}}return p})(),B=(()=>{class p{static{this.\u0275fac=function(n){return new(n||p)}}static{this.\u0275mod=e.$C({type:p})}static{this.\u0275inj=e.G2t({imports:[r.iI.forChild([{path:"",component:u}]),r.iI]})}}return p})();var w=i(491),L=i(563),H=i(8266);let U=(()=>{class p{static{this.\u0275fac=function(n){return new(n||p)}}static{this.\u0275mod=e.$C({type:p})}static{this.\u0275inj=e.G2t({providers:[h.bg],imports:[s.MD,B,w.D,m.tm,L.Z,y.bG,j.u,G.P,H.P,N.YN,R.kr,A.f,O.MB]})}}return p})()},2428:(_,E,i)=>{i.d(E,{G:()=>c});var s=i(1635),r=i(4706);class c{constructor(e={}){this.folio=e.folio,this.idPrograma=e.idPrograma,this.tipoPrograma=e.tipoPrograma,this.nivel=e.nivel,this.numeroMedicionesPresion=e.numeroMedicionesPresion,this.nivelSugerido=e.nivelSugerido,this.fechaInicio=e.fechaInicio,this.fechaFinal=e.fechaFinal}getFecha(e){if(!this.fechaInicio||!this.fechaFinal)return"";const a="inicio"===e?this.fechaInicio:this.fechaFinal,[h,D,F]=a.split("-").map(Number),v=new Date(h,D-1,F);return isNaN(v.getTime())?"":v.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}}(0,s.Cg)([(0,r.v)({name:"id_programa"})],c.prototype,"idPrograma",void 0),(0,s.Cg)([(0,r.v)({name:"tipo_programa"})],c.prototype,"tipoPrograma",void 0),(0,s.Cg)([(0,r.v)({name:"numero_mediciones_presion"})],c.prototype,"numeroMedicionesPresion",void 0),(0,s.Cg)([(0,r.v)({name:"nivel_sugerido"})],c.prototype,"nivelSugerido",void 0),(0,s.Cg)([(0,r.v)({name:"fecha_inicio"})],c.prototype,"fechaInicio",void 0),(0,s.Cg)([(0,r.v)({name:"fecha_final"})],c.prototype,"fechaFinal",void 0)},8777:(_,E,i)=>{i.d(E,{H:()=>I});var s=i(467),r=i(4454),c=i(7697),g=i(1626),e=i(8208);let a=(()=>{class x{static{this.findByFolio=`${e.p}/pacientes/folio/`}static{this.findData=`${e.p}/pacientes/data/`}static{this.findAllPacienteByIdDoctor=`${e.p}/pacientes/lista/`}static{this.altaPaciente=`${e.p}/autenticacion/pacientes/auth/registro`}static{this.registrarPaciente=`${e.p}/autenticacion/pacientes/data`}}return x})();var h=i(6354),D=i(9437),F=i(4843),v=i(7673),m=i(6010),y=i(1510),j=i(4626),G=i(1635),N=i(4706);class R{constructor(M={}){this.paciente=M.paciente,this.tratamientos=M.tratamientos,this.respuestas=M.respuestas,this.configuracionPrograma=M.configuracionPrograma,this.notificaciones=M.notificaciones}}(0,G.Cg)([(0,N.v)({name:"configuracion_programa"})],R.prototype,"configuracionPrograma",void 0);var A=i(6467),O=i(4464),S=i(2428),V=i(8404),k=i(4438),$=i(1948);let I=(()=>{class x{constructor(b,f){this.local=b,this.http=f}getHeaders(){return new g.Lr({Authorization:`Bearer ${this.local.getToken()}`,"Content-Type":"application/json"})}altaPaciente(b){var f=this;return(0,s.A)(function*(){return b.claveDoctor=f.local.getClaveDoctor(),(0,F._)(f.http.post(a.altaPaciente,(0,j.fL)(b),{observe:"response"}).pipe((0,h.T)(P=>200===P.status?(0,m.pG)(!0):(0,m.kb)(Error())),(0,D.W)(P=>(0,v.of)((0,m.kb)(400===P.status?new y.ep:Error(P.message))))))})()}buscarPacienteData(b){var f=this;return(0,s.A)(function*(){const P=`${a.findData}${b}/${f.local.getClaveDoctor()}`;return(0,F._)(f.http.get(P,{headers:f.getHeaders()}).pipe((0,h.T)(u=>{const B=(0,j.bj)(r.w,u?.paciente),w=u?.tratamientos.tratamientos?.map(t=>(0,j.bj)(A.W,t)),L=new A.F({folio:u.paciente.folio,tratamientos:w}),H=u?.respuestas.map(t=>(0,j.bj)(O.S,t)),U=(0,j.bj)(S.G,u?.configuracion_programa),p=u?.notificaciones.map(t=>(0,j.bj)(V.S,t)),T=new R({paciente:B,tratamientos:L,respuestas:H,configuracionPrograma:U,notificaciones:p});return(0,m.pG)(T)}),(0,D.W)(u=>(0,v.of)((0,m.kb)(404===u.status?new y.lB(u.message):Error(u.message))))))})()}buscarPacientePorFolio(b){var f=this;return(0,s.A)(function*(){return(0,F._)(f.http.get(`${a.findByFolio}${b}`,{headers:f.getHeaders()}).pipe((0,h.T)(u=>(0,m.pG)((0,j.bj)(r.w,u))),(0,D.W)(u=>(0,v.of)((0,m.kb)(404===u.status?new y.lB(u.message):Error(u.message))))))})()}buscarPacientes(){var b=this;return(0,s.A)(function*(){const f=(new Date).getTime(),P=`${a.findAllPacienteByIdDoctor}${b.local.getIdDoctor()}?nocache=${f}`;return(0,F._)(b.http.get(P,{headers:b.getHeaders(),params:{_t:f.toString()}}).pipe((0,h.T)(u=>{const B=u.map(w=>(0,j.bj)(c.i,w));return(0,m.pG)(B)}),(0,D.W)(u=>(0,v.of)((0,m.kb)(Error(u.message))))))})()}registrarDatos(b){var f=this;return(0,s.A)(function*(){return b.paciente.claveDoctor=f.local.getClaveDoctor(),(0,F._)(f.http.post(a.registrarPaciente,(0,j.fL)(b),{observe:"response"}).pipe((0,h.T)(P=>200===P.status?(0,m.pG)(!0):(0,m.kb)(Error())),(0,D.W)(P=>(0,v.of)((0,m.kb)(400===P.status?new y.ep:Error(P.message))))))})()}static{this.\u0275fac=function(f){return new(f||x)(k.KVO($.s),k.KVO(g.Qq))}}static{this.\u0275prov=k.jDH({token:x,factory:x.\u0275fac,providedIn:"root"})}}return x})()},4454:(_,E,i)=>{i.d(E,{w:()=>g});var s=i(1635),r=i(4706),c=i(7697);class g extends c.i{constructor(a={}){super({folio:a.folio,fechaNacimiento:a.fechaNacimiento,genero:a.genero,numMiembrosHogar:a.numMiembrosHogar,tipoDiabetes:a.tipoDiabetes,tiempoDiabetes:a.tiempoDiabetes,peso:a.peso,talla:a.talla,imc:a.imc,caloriasDia:a.caloriasDia,factorActividad:a.factorActividad}),this.nombre=a.nombre||"",this.apellidoPaterno=a.apellidoPaterno||"",this.apellidoMaterno=a.apellidoMaterno||"",this.estadoCivil=a.estadoCivil||"",this.nivelEstudios=a.nivelEstudios||"",this.telefono=a.telefono||"",this.correo=a.correo||""}getEstadoCivil(){return this.estadoCivil&&this.genero?"Uni\xf3n Libre"===this.estadoCivil?this.estadoCivil:this.estadoCivil.replaceAll("@","Hombre"===this.genero?"o":"a"):""}}(0,s.Cg)([(0,r.v)({name:"apellido_paterno"})],g.prototype,"apellidoPaterno",void 0),(0,s.Cg)([(0,r.v)({name:"apellido_materno"})],g.prototype,"apellidoMaterno",void 0),(0,s.Cg)([(0,r.v)({name:"estado_civil"})],g.prototype,"estadoCivil",void 0),(0,s.Cg)([(0,r.v)({name:"nivel_estudios"})],g.prototype,"nivelEstudios",void 0),(0,s.Cg)([(0,r.v)({name:"programa_asignado"})],g.prototype,"programa_asignado",void 0)},7697:(_,E,i)=>{i.d(E,{i:()=>c});var s=i(1635),r=i(4706);class c{constructor(e={}){this.folio=e.folio,this.fechaNacimiento=e.fechaNacimiento,this.genero=e.genero,this.numMiembrosHogar=e.numMiembrosHogar,this.tipoDiabetes=e.tipoDiabetes,this.tiempoDiabetes=e.tiempoDiabetes,this.peso=e.peso,this.talla=e.talla,this.imc=e.imc,this.caloriasDia=e.caloriasDia,this.factorActividad=e.factorActividad}calcularEdad(){if(!this.fechaNacimiento)return 0;const e=this.fechaNacimiento.split("-"),a=parseInt(e[0],10),h=parseInt(e[1],10)-1,D=parseInt(e[2],10),F=new Date(a,h,D);if(isNaN(F.getTime()))return 0;const v=new Date;let m=v.getFullYear()-F.getFullYear();const y=v.getMonth(),j=v.getDate();return(y<h||y===h&&j<D)&&m--,m}getFechaNacimiento(){if(!this.fechaNacimiento)return"";const[e,a,h]=this.fechaNacimiento.split("-").map(Number),D=new Date(e,a-1,h);return isNaN(D.getTime())?"":D.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}}(0,s.Cg)([(0,r.v)({name:"fecha_nacimiento"})],c.prototype,"fechaNacimiento",void 0),(0,s.Cg)([(0,r.v)({name:"num_miembros_hogar"})],c.prototype,"numMiembrosHogar",void 0),(0,s.Cg)([(0,r.v)({name:"tipo_diabetes"})],c.prototype,"tipoDiabetes",void 0),(0,s.Cg)([(0,r.v)({name:"tiempo_diabetes"})],c.prototype,"tiempoDiabetes",void 0),(0,s.Cg)([(0,r.v)({name:"calorias_dia"})],c.prototype,"caloriasDia",void 0),(0,s.Cg)([(0,r.v)({name:"factor_actividad"})],c.prototype,"factorActividad",void 0)},4464:(_,E,i)=>{i.d(E,{S:()=>c});var s=i(1635),r=i(4706);class c{constructor(e={}){this.folio=e.folio,this.idPregunta=e.idPregunta,this.descripcionPregunta=e.descripcionPregunta,this.tipo=e.tipo,this.respuesta=e.respuesta,this.puntaje=e.puntaje}}(0,s.Cg)([(0,r.v)({name:"id_pregunta"})],c.prototype,"idPregunta",void 0),(0,s.Cg)([(0,r.v)({name:"descripcion_pregunta"})],c.prototype,"descripcionPregunta",void 0)},6467:(_,E,i)=>{i.d(E,{F:()=>g,W:()=>c});var s=i(1635),r=i(4706);class c{constructor(a={}){this.idTratamiento=a.idTratamiento,this.nombre=a.nombre,this.tipo=a.tipo}}(0,s.Cg)([(0,r.v)({name:"id_tratamiento"})],c.prototype,"idTratamiento",void 0);class g{constructor(a={}){this.folio=a.folio,this.tratamientos=a.tratamientos}}}}]);